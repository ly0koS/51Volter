C51 COMPILER V9.59.0.0   FUNC                                                              01/05/2019 11:06:08 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE FUNC
OBJECT MODULE PLACED IN .\Objects\Func.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Func.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Project_Volter) DEBUG OBJECTEX
                    -TEND PRINT(.\Listings\Func.lst) TABS(2) OBJECT(.\Objects\Func.obj)

line level    source

   1          #include "Func.h"
   2          #define uchar unsigned char
   3          #define uint unsigned int
   4          
   5          #define key P2
   6          
   7          sbit erflags=PSW^5;
   8          
   9          extern data uchar  param[9];
  10          extern data uint para1,para2;
  11          extern uchar disp[8];
  12          extern uchar d2;
  13          
  14          void Calculate()
  15          {
  16   1        uint g,g1,g2;
  17   1        uint freq;
  18   1        if(param[6]==1)
  19   1        {
  20   2          g=10^6/param[1]/32;
  21   2          para1=65536-g;
  22   2          para2=param[2];
  23   2        }
  24   1        if(param[6]==2)
  25   1        {
  26   2          freq=param[3]*1000+param[4];
  27   2          g1=10^4/freq*param[5];
  28   2          g2=10^4/freq*(100-param[5]);
  29   2          para1=65536-g1;
  30   2          para2=65546-g2;
  31   2        }
  32   1      }
  33          
  34          void Process()
  35          {
  36   1        uchar freq;
  37   1        if(param[6]==1)
  38   1        {
  39   2          param[1]=disp[6]*10+disp[7];
  40   2        }
  41   1        else if(param[6]==2&&d2==15)
  42   1        {
  43   2          freq=disp[4]*1000+disp[5]*100+disp[6]*10+disp[7];
  44   2          param[7]=freq/256,param[8]=freq%256;
  45   2        }
  46   1        else
  47   1          param[disp[1]*2]=disp[6]*10+disp[7];
  48   1      }
  49          
  50          void read24c02(void)
  51          {
  52   1        uchar temp,i;
  53   1        sen:  erflags=0;
  54   1          Start();
C51 COMPILER V9.59.0.0   FUNC                                                              01/05/2019 11:06:08 PAGE 2   

  55   1          SendByte(0x90);         
  56   1          cAck( );              
  57   1          if(erflags==1) goto sen;      
  58   1          SendByte(0x00);           
  59   1          cAck( );              
  60   1          if(erflags==1) goto sen;
  61   1        temp=RcvByte();
  62   1        Ack();
  63   1        if(temp==0x55)
  64   1        {
  65   2          for(i=1;i<8;i++)
  66   2          {
  67   3            param[i]=RcvByte();
  68   3            cAck();
  69   3          }
  70   2        }
  71   1        else
  72   1        {
  73   2          write24c02();
  74   2        }
  75   1      }
  76          void write24c02(void)
  77          {
  78   1        uchar i;
  79   1        sen:  erflags=0;              
  80   1          Start( );               
  81   1          SendByte(0x90);         
  82   1          cAck( );              
  83   1          if(erflags==1) goto sen;      
  84   1          SendByte(0x00);           
  85   1          cAck( );              
  86   1          if(erflags==1) goto sen;  
  87   1        for(i=0;i<8;i++)
  88   1        {
  89   2          SendByte(param[i]);             
  90   2          cAck( );
  91   2        }
  92   1      }
  93          
  94          int keyscan()
  95          {
  96   1        uchar t,temp;
  97   1        key=0xf0;           
  98   1        if(key!=0xf0)
  99   1        {
 100   2          delay(10);      
 101   2          if(key!=0xf0)
 102   2          {
 103   3             switch(key)
 104   3             {
 105   4               case(0xe0):temp=0;break;
 106   4               case(0xd0):temp=1;break;
 107   4               case(0xb0):temp=2;break;
 108   4               case(0x70):temp=3;break;
 109   4            }
 110   3            key=0x0f;
 111   3            delay(10);
 112   3            switch(key)
 113   3            {
 114   4              case(0x0e):temp=temp;break;
 115   4              case(0x0d):temp=temp+4;break;
 116   4              case(0x0b):temp=temp+8;break;
C51 COMPILER V9.59.0.0   FUNC                                                              01/05/2019 11:06:08 PAGE 3   

 117   4              case(0x07):temp=temp+12;break;
 118   4            }
 119   3          }
 120   2        }
 121   1        switch(temp)                            //To fit keymap
 122   1        {
 123   2          case(8):temp=110;break;               //go left
 124   2          case(9):temp=8;break;                 //fit keymap
 125   2          case(10):temp=9;break;                //fit keymap
 126   2          case(11):temp=120;break;              //go right
 127   2        }
 128   1        return temp;
 129   1      }
*** WARNING C280 IN LINE 96 OF Func.c: 't': unreferenced local variable


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    498    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
