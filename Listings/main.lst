C51 COMPILER V9.59.0.0   MAIN                                                              01/05/2019 10:16:56 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Project_Volter) DEBUG OBJECTEX
                    -TEND PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          /*
   2            param[6]=1--->Sin
   3            param[6]=2--->Square Wave
   4          */
   5          
   6          #include "DISP.h"
   7          #include "I2C.h"
   8          #include "Func.h"
   9          #define uchar unsigned char
  10          #define uint unsigned int
  11          
  12          sbit recout=P1^0;
  13          
  14          bit erflags;
  15          bit setup;
  16          bit selectwp;
  17          bit rise;
  18          bit setupend;
  19          
  20          data uchar  param[9];
  21          data uchar  p;
  22          data uchar  hide;
  23          data uchar  k;
  24          data uint   para1,para2;
  25          data uchar  da;
  26          data uchar  so;
  27          
  28          extern uchar disp[8];
  29          extern d2;
  30          
  31          int main()
  32          {
  33   1        int keynum;
  34   1        EA=1;
  35   1        ET0=1;
  36   1        ET1=1;
  37   1        PT0=1;
  38   1        PT1=0;
  39   1        TH0=0xfe;
  40   1        TL0=0x0c;
  41   1        TR0=1;
  42   1        TR1=1;
  43   1        while(1)
  44   1        {
  45   2          read24c02();
  46   2          display(0,15);
  47   2          keynum=keyscan();
  48   2          if(keynum==12)
  49   2          {
  50   3            if(setup==1)
  51   3            {
  52   4              if(setupend==1)
  53   4              {
  54   5                write24c02;
C51 COMPILER V9.59.0.0   MAIN                                                              01/05/2019 10:16:56 PAGE 2   

*** WARNING C275 IN LINE 54 OF main.c: expression with possibly no effect
  55   5                Calculate();
  56   5              }
  57   4              setup=0;
  58   4              display(0,15);
  59   4            }
  60   3            else
  61   3            {
  62   4              setup=1;
  63   4              display(5,15);
  64   4            }
  65   3          }
  66   2          if(keynum==13)
  67   2          {
  68   3            if(selectwp==1)
  69   3            {
  70   4              switch(param[6])
  71   4              {
  72   5                case(1):param[6]=2;break;
  73   5                case(2):param[6]=1;break;
  74   5              }
  75   4            }
  76   3            else
  77   3            {
  78   4              k=1;
  79   4              disp[k]=1;
  80   4              display(5,15);
  81   4            }
  82   3          }
  83   2          if(keynum==14)
  84   2          {
  85   3            if(selectwp==0)
  86   3            {
  87   4              if(d2!=15)
  88   4              {
  89   5                d2=15;
  90   5              }
  91   4              if(keynum==110)
  92   4              {
  93   5                if(param[6]==1&&k>6)
  94   5                {
  95   6                  k=k-1;
  96   6                }
  97   5                else if(param[6]==2&&k>4)                     //What if in Vpp mode?
  98   5                {
  99   6                  k=k-1;
 100   6                }
 101   5              }
 102   4              if(keynum==120)
 103   4              {
 104   5                if(param[6]==1)
 105   5                {
 106   6                  if(k<6)
 107   6                  {
 108   7                    k=6;
 109   7                  }
 110   6                  else if(disp[6]==5)
 111   6                  {
 112   7                    k=6;
 113   7                  }
 114   6                  else if(k==7)
 115   6                  {
C51 COMPILER V9.59.0.0   MAIN                                                              01/05/2019 10:16:56 PAGE 3   

 116   7                    k=6;
 117   7                  }
 118   6                  else
 119   6                  {
 120   7                    k=k+1;
 121   7                  }
 122   6                }
 123   5                else if(param[6]==2)                      //What if in Vpp mode?
 124   5                {
 125   6                  if(k<4)
 126   6                  {
 127   7                    k=4;
 128   7                  }
 129   6                  else if(disp[4]==1)
 130   6                  {
 131   7                    k=4;
 132   7                  }
 133   6                  else if(k==7)
 134   6                  {
 135   7                    k=4;
 136   7                  }
 137   6                  else
 138   6                  {
 139   7                    k=k+1;
 140   7                  }
 141   6                }
 142   5              }
 143   4            }
 144   3            else
 145   3            {
 146   4              selectwp=1;
 147   4            }
 148   3          }
 149   2        }
 150   1        return 0;
 151   1      }
 152          
 153          
 154          void output(void) interrupt 3
 155          {
 156   1        
 157   1        TR1=0;
 158   1        if(param[6]==1)
 159   1        {
 160   2          TH1=para1/256;
 161   2          TL1=para1%256;
 162   2          if(rise)
 163   2          {
 164   3            if(da<240)
 165   3            {
 166   4              da=da+16;
 167   4            }
 168   3            else if(da==240)
 169   3            {
 170   4              da=255;
 171   4              rise=0;
 172   4            }
 173   3          }
 174   2          else
 175   2          {
 176   3            if(da>16)
 177   3            {
C51 COMPILER V9.59.0.0   MAIN                                                              01/05/2019 10:16:56 PAGE 4   

 178   4              da=da-16;
 179   4            }
 180   3            else
 181   3            {
 182   4              da=0;
 183   4              rise=1;
 184   4            }
 185   3          }
 186   2          so=para2*da/50;
 187   2          /*Add I2C DAC Code*/
 188   2          sen:  erflags=0;              
 189   2            Start( );               
 190   2            SendByte(0x90);         
 191   2            cAck( );              
 192   2            if(erflags==1) goto sen;      
 193   2            SendByte(0x00);           
 194   2            cAck( );              
 195   2            if(erflags==1) goto sen;  
 196   2          SendByte(so);
 197   2          cAck();
 198   2        }
 199   1        else if(param[6]==2)
 200   1        {
 201   2          recout=~recout;
 202   2          if(recout)  
 203   2          {
 204   3            TH1=para1/256;
 205   3            TL1=para1%256; 
 206   3          }
 207   2          else     
 208   2          {
 209   3            TH1=para2/256;
 210   3            TL1=para2%256; 
 211   3          }
 212   2        }
 213   1        TR1=1;
 214   1      }
*** WARNING C294 IN LINE 150 OF main.c: unreachable code


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    532    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     18       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      5    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)
